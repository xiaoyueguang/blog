# è®°ä¸€æ¬¡é¡¹ç›®å‡çº§

## èƒŒæ™¯
æ‰‹é‡Œæœ‰ä¸€ä¸ªä¸¤å¹´å‰çš„é¡¹ç›®, ç”±`vue`è„šæ‰‹æ¶ç”Ÿæˆ, åŒæ—¶å¼•ç”¨äº†`vue-router`, `vuex`, `vux`, `vux-loader`.

é¦–å…ˆè¦ç§»é™¤`vux-loader`ä»¥åŠ`vux`, `vux-loader`ä¸å…¼å®¹æœ€æ–°ç‰ˆçš„`vue-loader`, å¯¼è‡´åæœŸå¦‚æœå‡çº§åˆ°`vue`3.0, å¯èƒ½ä¼šé˜»ç¢, å› æ­¤è¦åœ¨ä»£ç ä¸­ç§»é™¤`vux`. åŒæ—¶å¼•ç”¨`vant`.

åŒæ—¶`webpack`ç‰ˆæœ¬ä¹Ÿæ˜¯3.6.0, è€Œ4.0å‡ºæ¥ä¹Ÿå°†è¿‘æœ‰ä¸€å¹´äº†, ç›¸ä¿¡ä¹Ÿå·²ç»è¶³å¤Ÿç¨³å®šäº†å¹¶ä¸”ç¬¬ä¸‰æ–¹ä¹ŸåŸºæœ¬éƒ½å‡çº§åˆ°4.0ä¸“ç”¨çš„äº†. `webpack`4.0è¿˜å¸¦æ¥äº†æ›´å¤šçš„ä¼˜åŒ–, æ¯”å¦‚æ›´ç®€å•çš„é…ç½®, æ›´å¥½çš„æ‰“åŒ…æ€§èƒ½, ä»¥åŠç¼–è¯‘åæ›´å°çš„ä½“ç§¯ç­‰ç­‰.

`babel`ä¹Ÿå‡ºäº†7.0, å¸¦æ¥å¤§é‡çš„æ–°ç‰¹æ€§, æ‹¥æœ‰æ›´å¥½çš„æ€§èƒ½, ä»¥åŠæ›´è‡ªç”±çš„é…ç½®.

## æ­¥éª¤

### webpack
é¦–å…ˆå…ˆå®‰è£…`webpack`4.0æ‰€éœ€çš„ä¾èµ–, æ¯”å¦‚`webpack`ä»¥åŠ`webpack-cli`, 4.0å°†`webpack`æ‹†åˆ†ä¸ºä¸¤ä¸ª, è®©ä¸¤ä¸ªåº“ä¸“æ³¨äºè‡ªå·±çš„äº‹.
```sh
npm i -D webpack webpack-cli
```
`webpack`4.0 é‡‡ç”¨äº†0é…ç½®, å¤§å¤§ç²¾ç®€äº†é…ç½®, åªéœ€ç”¨`mode`æ¥åŒºåˆ†ç¯å¢ƒ.
```js
module.exports = {
  mode: 'development'
  // mode: 'production'
}
```
åœ¨`development`æ¨¡å¼ä¸‹, `webpack`ä¼šå°†`process.env.NODE_ENV`è®¾ç½®ä¸º`development`, å¯ç”¨`NamedChunksPlugin`å’Œ`NamedModulesPlugin`, å°†ä¼šæ›´åŠ æ³¨é‡äºè°ƒè¯•ä¸å¼€å‘ä½“éªŒ.

åœ¨`production`æ¨¡å¼ä¸‹, `webpack`ä¼šå°†`process.env.NODE_ENV`è®¾ç½®ä¸º`production`, å¯ç”¨`FlagDependencyUsagePlugin`, `FlagIncludedChunksPlugin`, `ModuleConcatenationPlugin`, `NoEmitOnErrorsPlugin`, `OccurrenceOrderPlugin`, `SideEffectsFlagPlugin`å’Œ`UglifyJsPlugin`, å®ç°é¢„ç¼–è¯‘, å°½å¯èƒ½çš„å¼€å¯ä¼˜åŒ–ä»£ç , æ›´å°çš„ä½“ç§¯ä»¥åŠå‹ç¼©ç­‰.

åŒæ—¶è‡ªåŠ¨æŒ‡å®šå…¥å£`./src/index.js`, ä»¥åŠè¾“å‡º`./dist/main.js`

### vue-loader
`module`çš„`rules`åˆ™æŒ‰ç…§ä»¥å‰çš„é…ç½®. è¦æ³¨æ„çš„æ˜¯`vue-loader`éœ€è¦ä¸€ä¸ªæ–°çš„`webpack`æ’ä»¶æ‰èƒ½ä½¿ç”¨, åŒæ—¶æœ‰ä¸€ä¸ª`Loader`æ¨å¯¼åŠŸèƒ½, ä¼šæŒ‰ç…§ä»£ç å—æ‰€éœ€çš„è¯­è¨€, å…±ç”¨`module`ä¸­çš„`rules`, è€Œä¸éœ€è¦å¦å¤–å†™ä¸€ä»½. [è¯¦æƒ…æŸ¥çœ‹](https://vue-loader.vuejs.org/zh/migrating.html)
```js
const VueLoaderPlugin = require('vue-loader/lib/plugin')
module.exports = {
  plugins: [
    new VueLoaderPlugin()
  ]
}
```

### babel
`babel`å‡çº§åˆ°7.0å, æœ‰äº†ä¸ªå…¨æ–°çš„ç§æœ‰åŸŸ, ç§»é™¤äº†æœ‰å¹´ä»½çš„`preset`, æ•´ä¸ª`.babelrc`éƒ½å˜çš„ååˆ†ç®€å•
```json
{
  "presets": [
    ["@babel/preset-env", {
      "modules": false,
      "targets": {
        "browsers": ["> 1%", "last 2 versions", "not ie <= 8"]
      }
    }]
  ],
  "plugins": [
    "@babel/plugin-transform-runtime",
    "@babel/plugin-syntax-dynamic-import"
    ]
  ]
}

```

### ç»„ä»¶é€‚é…
åŸå…ˆæ˜¯ç›´æ¥åœ¨å„ä¸ªç»„ä»¶ä¸­å¼•ç”¨UIæ¡†æ¶çš„ç»„ä»¶, æ¯”å¦‚
```js
import { XButton } from 'vux'
export default {
  components: {
    XButton
  }
}
```
è¿™ç»™è¿ç§»çš„æ—¶å€™å¸¦æ¥å¾ˆå¤§çš„éº»çƒ¦, æ›¿æ¢æˆ`vant`çš„`button`ç»„ä»¶, éœ€è¦æœç´¢æ‰€æœ‰ç»„ä»¶ä¸­çš„å­—æ®µå¹¶ä¿®æ”¹.

è¿™é‡Œå¼•å…¥äº†ç±»ä¼¼è®¾è®¡æ¨¡å¼ä¸­çš„**é€‚é…å™¨æ¨¡å¼**, å…ˆå»ºç«‹ä¸ªç»„ä»¶, å»å¼•ç”¨å¯¹åº”çš„ç¬¬ä¸‰æ–¹UIç»„ä»¶, ç„¶åå„ä¸ªç»„è£…ä¸­å¼•ç”¨ç»„ä»¶éƒ½æ›¿æ¢ä¸ºè¯¥ç»„ä»¶. ä»¥åè¦æ›¿æ¢çš„æ—¶å€™ç›´æ¥åœ¨è¯¥ç»„ä»¶ä¸­ä¿®æ”¹å³å¯.
æ¯”å¦‚

```html
<x-button :type="type" @click.native="click">{{text}}<x-button>
<script>
import { XButton } from 'vux'
export default {
  components: {
    XButton
  },
  props: {
    text: {
      type: String,
      default: ''
    },
    type: {
      type: String,
      default: 'primary'
    }
  },
  methods: {
    click () {
      this.$emit('click')
    }
  }
}
</script>
```
è°ƒæ•´ä¸ºé€‚é…å™¨æ¨¡å¼å, åªéœ€ä¿®æ”¹è¯¥ç»„ä»¶, å³å¯è½»æ¾æ›¿æ¢
```html
<van-button :type="type" @click="click">{{text}}<van-button>
<script>

export default {
  components: {
    XButton
  },
  props: {
    text: {
      type: String,
      default: ''
    },
    type: {
      type: String,
      default: 'primary'
    }
  },
  methods: {
    click () {
      this.$emit('click')
    }
  }
}
</script>
```

### ç»“æœ
ç»è¿‡ä¸€ç³»åˆ—ä¼˜åŒ–å, æŸ¥çœ‹æ‰“åŒ…ç»“æœ: ![è®°ä¸€æ¬¡é¡¹ç›®å‡çº§-1.png](https://ws2.sinaimg.cn/large/006tNc79ly1fze7d34a9lj30bm078ju1.jpg).

ç¼–è¯‘æ‰€éœ€çš„æ—¶é—´å°†è¿‘åŸå…ˆçš„ä¸€åŠ, æå‡å¯ä»¥è¯´æ˜¯éå¸¸æ˜æ˜¾.

## æ€»ç»“

ç»è¿‡è¿™æ¬¡çš„é¡¹ç›®å‡çº§å, å¾—ç›Šäº`webpack`4.0çš„0é…ç½®ä»¥åŠæ€§èƒ½ä¼˜åŒ–, ç¼–å†™é…ç½®æ–‡ä»¶å‡ ä¹èŠ±ä¸äº†å¤šå°‘æ—¶é—´, åŒæ—¶æ‹¥æœ‰æ¯”ä»¥å‰æ›´å¼ºå¥çš„æ€§èƒ½. ğŸ‘